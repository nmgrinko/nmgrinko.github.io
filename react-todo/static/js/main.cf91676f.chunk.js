(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{41:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(1),c=n.n(r),o=n(16),i=n.n(o),s=(n(41),n(18)),l=n(5),u=n(13),d=n(11),b=n(12),f=(n(48),n(49),function(e){var t=e.toDo,n=e.done;return Object(a.jsxs)("div",{className:"app-header d-flex",children:[Object(a.jsx)("h1",{children:" ToDo List "}),Object(a.jsxs)("h2",{children:[" ",t," more to do, ",n," done "]})]})}),j=n(35),O=function(e){var t=e.classNamelabel,n=e.idListGroup,r=e.onDragAndDrop,c=e.children,o=t.split(" ")[0];return Object(a.jsx)("li",{className:"list-group-item",draggable:"true",onDragStart:function(e){e.target.querySelector(".".concat(o)).classList.add("selected")},onDragEnd:function(e){e.target.querySelector(".".concat(o)).classList.remove("selected")},onDragOver:function(e){e.preventDefault();var t=e.target.closest("#".concat(n)).querySelector(".selected"),a=e.target;if(t!==a&&a.classList.contains(o)){var c=function(e,t){var n=t.getBoundingClientRect();return e<n.y+n.height/2?t:t.nextElementSibling}(e.clientY,a);c&&t===c.previousElementSibling||t===c||r(t.id,c.id)}},children:c})},m=(n(50),n(51),function(e){var t=e.id,n=e.className,r=e.label,c=e.onToggleImportant,o=e.onToggleDone,i=e.onDelete,s=e.onEditItemLabel;return Object(a.jsxs)("div",{className:"todo-list-item",children:[Object(a.jsx)("button",{type:"button",className:"button-important",onClick:c}),Object(a.jsx)("div",{className:n,onClick:o,id:t,children:r}),Object(a.jsx)("button",{type:"button",onClick:s,children:"edit"}),Object(a.jsx)("button",{type:"button",onClick:i,children:"delete"})]})}),p=(n(52),function(e){var t=e.items,n=e.onToggleImportant,r=e.onToggleDone,c=e.onDelete,o=e.onEditItemLabel,i=e.onDragAndDrop,s="idListGroup",u=t.map((function(e){var t=e.id,u=e.important,d=e.done,b=Object(j.a)(e,["id","important","done"]),f="todo-list-item-label";return u&&(f+=" important"),d&&(f+=" done"),Object(a.jsx)(O,{classNamelabel:f,idListGroup:s,onDragAndDrop:i,children:Object(a.jsx)(m,Object(l.a)(Object(l.a)({},b),{},{id:t,className:f,onToggleImportant:function(){return n(t)},onToggleDone:function(){return r(t)},onDelete:function(){return c(t)},onEditItemLabel:function(){return o(t)}}))},t)}));return Object(a.jsx)("ul",{className:"todo-list list-group",id:s,children:u})}),g=(n(53),function(e){var t=e.onSearchChange,n=void 0===t?function(){}:t,c=Object(r.useState)({term:""}),o=Object(d.a)(c,2),i=o[0],s=o[1];return Object(a.jsx)("input",{type:"text",className:"form-control search-input",placeholder:"Search",value:i.term,onChange:function(e){s({term:e.target.value}),n(e.target.value)}})}),v=[{name:"all",label:"All"},{name:"active",label:"Active"},{name:"done",label:"Done"}],h=function(e){var t=e.filter,n=e.onFilterChange,r=void 0===n?function(){}:n,c=v.map((function(e){var n=e.name,c=e.label,o="btn "+(n===t?"btn-outline-secondary":"btn-secondary");return Object(a.jsx)("button",{type:"button",onClick:function(){return r(n)},className:o,children:c},n)}));return Object(a.jsx)("div",{className:"btn-group",children:c})},x=(n(54),function(e){var t=e.stateForm,n=e.onItemAdded,c=e.onSaveItemLabel,o=e.onDelete,i=Object(r.useState)({label:"",edit:!0}),s=Object(d.a)(i,2),u=s[0],b=s[1];!t.flag&&u.edit&&b(Object(l.a)(Object(l.a)({},t),{},{edit:!1}));return Object(a.jsxs)("form",{className:"bottom-panel d-flex",onSubmit:function(e){e.preventDefault();var a=u.label;t.flag?a.length>0&&n(a):a.length>0?c({label:a,id:t.id}):o(t.id),b({label:"",edit:!0})},children:[Object(a.jsx)("input",{type:"text",className:"form-control new-todo-label",value:u.label,onChange:function(e){b(Object(l.a)(Object(l.a)({},u),{},{label:e.target.value}))},placeholder:"What needs to be done?"}),Object(a.jsxs)("button",{type:"submit",className:"btn btn-outline-secondary",children:[" ",t.flag?"Add":"Save"," "]})]})}),E=(n(55),Object(b.b)((function(e){return{loading:e.loading}}),null)((function(e){return e.loading?Object(a.jsx)("div",{className:"lds-css",children:Object(a.jsxs)("div",{className:"lds-double-ring",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})}):null}))),D=0,T={GET_TODO:function(){return{type:"GET_TODO"}},PUT_TODO:function(e){return{type:"PUT_TODO",state:e}},SET_ITEM:function(e){return{type:"SET_ITEM",items:e}},RECEIV_FILTER:function(e){return{type:"RECEIV_FILTER",filter:e}},RECEIV_SEARCH:function(e){return{type:"RECEIV_SEARCH",search:e}}},I=Object(b.b)((function(e){return{state:e}}),T)((function(e){var t=e.GET_TODO,n=e.PUT_TODO,c=e.SET_ITEM,o=e.RECEIV_FILTER,i=e.RECEIV_SEARCH,b=e.state,j=e.state,O=j.items,m=j.filter,v=j.search,T=Object(r.useState)(!0),I=Object(d.a)(T,2),C=I[0],S=I[1],_={label:"",flag:!0},y=Object(r.useState)(_),L=Object(d.a)(y,2),R=L[0],w=L[1],N=function(e,t,n){var a=e.findIndex((function(e){return e.id===t})),r=!e[a][n],c=Object(l.a)(Object(l.a)({},e[a]),{},Object(s.a)({},n,r));return[].concat(Object(u.a)(e.slice(0,a)),[c],Object(u.a)(e.slice(a+1)))},k=function(e){c(function(t){var n=t.items.findIndex((function(t){return t.id===e})),a=[].concat(Object(u.a)(t.items.slice(0,n)),Object(u.a)(t.items.slice(n+1)));return w(_),a}(b))},A=function(e){return{id:Date.now(),label:e,important:!1,done:!1}},F=O.filter((function(e){return e.done})).length,V=O.length-F,G=function(e,t){return 0===t.length?e:e.filter((function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1}))}(function(e,t){return"all"===t?e:"active"===t?e.filter((function(e){return!e.done})):"done"===t?e.filter((function(e){return e.done})):void 0}(O,m),v);return Object(r.useEffect)((function(){var e=Date.now()-D;b.server&&e>100&&n({items:b.items}),D=Date.now()})),C&&(t(),S(!C)),Object(a.jsxs)("div",{className:"todo-app",children:[Object(a.jsx)(f,{toDo:V,done:F}),Object(a.jsxs)("div",{className:"search-panel d-flex",children:[Object(a.jsx)(g,{onSearchChange:function(e){i(e)}}),Object(a.jsx)(h,{filter:m,onFilterChange:function(e){o(e)}})]}),Object(a.jsx)(p,{items:G,onToggleImportant:function(e){c(function(t){return N(t.items,e,"important")}(b))},onToggleDone:function(e){c(function(t){return N(t.items,e,"done")}(b))},onDelete:k,onEditItemLabel:function(e){var t=O.find((function(t){return t.id===e})).label;w({label:t,flag:!1,id:e})},onDragAndDrop:function(e,t){var n=O.slice(),a=O.findIndex((function(t){return t.id===+e})),r=O.findIndex((function(e){return e.id===+t}));if(-1!==a&&-1!==r){var o=O[a],i=O[r];n[a]=i,n[r]=o,c(n)}}}),Object(a.jsx)(x,{stateForm:R,onDelete:k,onSaveItemLabel:function(e){var t=e.label,n=e.id,a=O.slice(),r=a.findIndex((function(e){return e.id===n}));a[r].label=t,w(_)},onItemAdded:function(e){c(function(t){var n=A(e);return[].concat(Object(u.a)(t.items),[n])}(b))}}),Object(a.jsx)(E,{})]})})),C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))},S=n(10),_=n(34),y=n(8),L=n.n(y),R=n(14),w=n(33),N=n.n(w).a.create({baseURL:"https://react-todo-21012021-default-rtdb.europe-west1.firebasedatabase.app/todo-list.json",responseType:"json"}),k=L.a.mark(P),A=L.a.mark(U),F=L.a.mark(M),V=L.a.mark(H),G=L.a.mark(q);function P(){var e;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.get("/");case 2:if(!(e=t.sent).data){t.next=8;break}return t.next=6,Object(R.b)({type:"TODO_RECEIVED",data:Object(l.a)({},e.data.state)});case 6:t.next=10;break;case 8:return t.next=10,Object(R.b)({type:"TODO_RECEIVED",data:{}});case 10:case"end":return t.stop()}}),k)}function U(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.c)("GET_TODO",P);case 2:case"end":return e.stop()}}),A)}function M(e){return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.put("/",{state:e.state});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("Server is not update!",t.t0);case 8:case"end":return t.stop()}}),F,null,[[0,5]])}function H(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.c)("PUT_TODO",M);case 2:case"end":return e.stop()}}),V)}function q(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.a)([U(),H()]);case 2:case"end":return e.stop()}}),G)}var B={items:[],filter:"all",search:"",loading:!1},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TODO":return Object(l.a)(Object(l.a)({},e),{},{loading:!0});case"PUT_TODO":return e;case"TODO_RECEIVED":return Object(l.a)(Object(l.a)(Object(l.a)({},e),t.data),{},{loading:!1,server:!0});case"SET_ITEM":return Object(l.a)(Object(l.a)({},e),{},{items:t.items});case"RECEIV_FILTER":return Object(l.a)(Object(l.a)({},e),{},{filter:t.filter});case"RECEIV_SEARCH":return Object(l.a)(Object(l.a)({},e),{},{search:t.search});default:return e}},W=Object(_.a)(),Y=Object(S.d)(J,Object(S.a)(W));W.run(q);var z=Y;i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(b.a,{store:z,children:Object(a.jsx)(I,{})})}),document.getElementById("root")),C()}},[[75,1,2]]]);
//# sourceMappingURL=main.cf91676f.chunk.js.map